<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<room>
  <caption></caption>
  <width>1024</width>
  <height>768</height>
  <vsnap>32</vsnap>
  <hsnap>32</hsnap>
  <isometric>0</isometric>
  <speed>30</speed>
  <persistent>0</persistent>
  <colour>12632256</colour>
  <showcolour>-1</showcolour>
  <code>ini_open(working_directory+"LauncherVersion.ini");  
global.CurrentVersion = ini_read_real("version", "CurrentVersion", 0.1);  
global.CurrentVersionType = ini_read_string("version", "VersionType", "Pre-Alpha");  
ini_close();  
///Deleting Version.ini and redownloading it  
if(file_exists("Version.ini"))  
{  
  file_delete("Version.ini");//Used to check if there is a newer version  
}  

if(file_exists("N++_Installer.zip"))//Replace this with your .zip file name  
{  
  file_delete("N++_Installer.zip");  
}  

http_get_file("https://www.dropbox.com/s/7ygopvita70rabm/Version.ini?dl=1", working_directory+"Version.ini");//Replace this with your Version.ini link  

Version = 0;  
VersionType = "";  
url = "";  
Notes = "";  
downloaded = false;  

Type = "";  

alarm[0] = 30;  
alarm[2] = 15;  

///Getting data from downloaded ini file  
if(file_exists("Version.ini"))  
{  
  ini_open("Version.ini");  
  Version = ini_read_real("Version", "Number", 0);  
  VersionType = ini_read_string("Version", "Type", "");  
  Notes = ini_read_string("Version", "Notes", "Failed to load patch notes");  
  url = ini_read_string("Version", "Link", "");  
  ini_close();  

alarm[1] = 10;  
}  
else  
{  
  alarm[0] = 10;  
}  

if(Version &gt; global.CurrentVersion)  
{  
  Type = "Newer";  
  http_get_file(url, working_directory+"N++_Installer.zip");  
}  
else  
{  
  if(Version == global.CurrentVersion)  
  {  
    Type = "Same";  
    downloaded = true;  
  }  
  if(Version &lt; global.CurrentVersion)  
  {  
    Type = "Advanced";  
    downloaded = true;  
  }  
}  

///Extracting your file  
if(file_exists("N++_Installer.zip") and downloaded == false)  
{  
  show_debug_message("Files downloaded!");  
  zip_unzip("N++_Installer.zip", working_directory+"/Notepad++/");  
  file_delete("N++_Installer.zip");  
  downloaded = true;  
}  
else  
{  
  alarm[2] = 15;  
}  

if(downloaded == false)  
{  
  switch(Type)  
  {  
    case "Same":  
      draw_text(x, y, "You have the latest version: "+string(global.CurrentVersionType)+" "+string(global.CurrentVersion));  
    break;  

    case "Newer":  
      draw_text(x, y, "Downloading newer version: "+string(VersionType)+" "+string(Version));  
    break;  

    case "Advanced":  
      draw_text(x, y, "What?Somehow your version is higher than the newest: "+string(VersionType)+" "+string(Version));  
    break;  
  }  
}  
else  
{  
  draw_text(x, y, "You have the latest version: "+string(VersionType)+" "+string(Version));  
}  

draw_text(16, 16, Notes); 

ini_open(working_directory+"LauncherVersion.ini");  
ini_write_real("Version", "CurrentVersion", Version);  
ini_write_string("Version", "VersionType", VersionType);  
ini_close();  

///Opening your game  
if(obj_UpdateChecker.downloaded)  
{  
  if(file_exists(working_directory+"/Notepad++/N++_Installer.exe"))  
  {  
    shell_do("open", game_save_id+"/Notepad++/N++_Installer.exe");//Using game_save_id since working_directory doesn't work with shell_do for some reason  
    game_end();//Closing the installer after the game launches  
  }  
}  

draw_self();//Drawing the square  

draw_set_color(c_black);  
draw_set_halign(fa_center);  
draw_set_valign(fa_middle);  

draw_text(x, y, "Play!");</code>
  <enableViews>0</enableViews>
  <clearViewBackground>-1</clearViewBackground>
  <clearDisplayBuffer>-1</clearDisplayBuffer>
  <makerSettings>
    <isSet>0</isSet>
    <w>0</w>
    <h>0</h>
    <showGrid>0</showGrid>
    <showObjects>0</showObjects>
    <showTiles>0</showTiles>
    <showBackgrounds>0</showBackgrounds>
    <showForegrounds>0</showForegrounds>
    <showViews>0</showViews>
    <deleteUnderlyingObj>0</deleteUnderlyingObj>
    <deleteUnderlyingTiles>0</deleteUnderlyingTiles>
    <page>0</page>
    <xoffset>0</xoffset>
    <yoffset>0</yoffset>
  </makerSettings>
  <backgrounds>
    <background visible="0" foreground="0" name="" x="0" y="0" htiled="-1" vtiled="-1" hspeed="0" vspeed="0" stretch="0"/>
    <background visible="0" foreground="0" name="" x="0" y="0" htiled="-1" vtiled="-1" hspeed="0" vspeed="0" stretch="0"/>
    <background visible="0" foreground="0" name="" x="0" y="0" htiled="-1" vtiled="-1" hspeed="0" vspeed="0" stretch="0"/>
    <background visible="0" foreground="0" name="" x="0" y="0" htiled="-1" vtiled="-1" hspeed="0" vspeed="0" stretch="0"/>
    <background visible="0" foreground="0" name="" x="0" y="0" htiled="-1" vtiled="-1" hspeed="0" vspeed="0" stretch="0"/>
    <background visible="0" foreground="0" name="" x="0" y="0" htiled="-1" vtiled="-1" hspeed="0" vspeed="0" stretch="0"/>
    <background visible="0" foreground="0" name="" x="0" y="0" htiled="-1" vtiled="-1" hspeed="0" vspeed="0" stretch="0"/>
    <background visible="0" foreground="0" name="" x="0" y="0" htiled="-1" vtiled="-1" hspeed="0" vspeed="0" stretch="0"/>
  </backgrounds>
  <views>
    <view visible="0" objName="" xview="0" yview="0" wview="1024" hview="768" xport="0" yport="0" wport="1024" hport="768" hborder="32" vborder="32" hspeed="-1" vspeed="-1"/>
    <view visible="0" objName="" xview="0" yview="0" wview="1024" hview="768" xport="0" yport="0" wport="1024" hport="768" hborder="32" vborder="32" hspeed="-1" vspeed="-1"/>
    <view visible="0" objName="" xview="0" yview="0" wview="1024" hview="768" xport="0" yport="0" wport="1024" hport="768" hborder="32" vborder="32" hspeed="-1" vspeed="-1"/>
    <view visible="0" objName="" xview="0" yview="0" wview="1024" hview="768" xport="0" yport="0" wport="1024" hport="768" hborder="32" vborder="32" hspeed="-1" vspeed="-1"/>
    <view visible="0" objName="" xview="0" yview="0" wview="1024" hview="768" xport="0" yport="0" wport="1024" hport="768" hborder="32" vborder="32" hspeed="-1" vspeed="-1"/>
    <view visible="0" objName="" xview="0" yview="0" wview="1024" hview="768" xport="0" yport="0" wport="1024" hport="768" hborder="32" vborder="32" hspeed="-1" vspeed="-1"/>
    <view visible="0" objName="" xview="0" yview="0" wview="1024" hview="768" xport="0" yport="0" wport="1024" hport="768" hborder="32" vborder="32" hspeed="-1" vspeed="-1"/>
    <view visible="0" objName="" xview="0" yview="0" wview="1024" hview="768" xport="0" yport="0" wport="1024" hport="768" hborder="32" vborder="32" hspeed="-1" vspeed="-1"/>
  </views>
  <instances/>
  <tiles/>
  <PhysicsWorld>0</PhysicsWorld>
  <PhysicsWorldTop>0</PhysicsWorldTop>
  <PhysicsWorldLeft>0</PhysicsWorldLeft>
  <PhysicsWorldRight>1024</PhysicsWorldRight>
  <PhysicsWorldBottom>768</PhysicsWorldBottom>
  <PhysicsWorldGravityX>0</PhysicsWorldGravityX>
  <PhysicsWorldGravityY>10</PhysicsWorldGravityY>
  <PhysicsWorldPixToMeters>0.100000001490116</PhysicsWorldPixToMeters>
</room>
